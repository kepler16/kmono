test:
    clojure -M:test -m "kaocha.runner"

clean:
    clojure -T:build clean

build: clean
    clojure -T:build build

release:
    clojure -T:build release

build-uber-native: clean
    clojure -T:build uber-for-native

native-image:
    $GRAALVM_HOME/bin/native-image \
      -jar target/kmono-uber.jar \
      --no-fallback \
      --features=clj_easy.graal_build_time.InitClojureClasses \
      --report-unsupported-elements-at-runtime \
      -o target/kmono \
      -H:+UnlockExperimentalVMOptions \
      -H:+ReportExceptionStackTraces \
      --initialize-at-build-time=org.eclipse.aether.transport.http.HttpTransporterFactory

build-native: build-uber-native native-image
